# Knowledge Package: useUpdateNewState

## Описание
Кастомный хук для управления состоянием Upstate/New State.

## Сценарии использования
- Использовать в компонентах, где требуется реактивное обновление состояния
- Покрыть unit-тестами

## Снапшоты
- [2024-06-21] Зафиксирован в snapshot-1-2024-06-21T12-00-00

## История и сценарии работы со снапшотами
- Снапшоты позволяют:
  - Откатываться к рабочей версии хука при ошибках или регрессии
  - Клонировать реализацию хука для новых проектов или фич
  - Использовать структуру снапшота как шаблон для интеграции с другими компонентами
  - Проводить тестирование и сравнение разных версий хука
  - Мигрировать логику хука между проектами
  - Проводить аудит изменений и анализировать эволюцию хука

### Автоматизированный workflow для сравнения и отката версий
1. AI/команда определяет нужный снапшот (например, snapshot-1-2024-06-21T12-00-00).
2. Для сравнения версий:
   - Промпт: "Сравни текущую версию useUpdateNewState с версией из снапшота X"
   - AI вызывает MCP API для извлечения файлов из снапшота и сравнения с текущей реализацией (diff).
3. Для отката:
   - Промпт: "Откатить useUpdateNewState к состоянию снапшота X"
   - AI вызывает MCP API для отката проекта/файла к нужному снапшоту.
4. Все действия фиксируются в changelog и auditLog.md.

#### Примеры команд/промптов
- "Сравни useUpdateNewState с версией из snapshot-1-2024-06-21T12-00-00"
- "Откатить useUpdateNewState к состоянию snapshot-1-2024-06-21T12-00-00"

#### Best practices
- Перед откатом всегда делайте новый снапшот текущего состояния
- Используйте diff для анализа изменений перед принятием решения об откате
- Документируйте причину отката или сравнения в changelog и auditLog.md

## Риски
- Возможные side-effects при асинхронных обновлениях
- Неочевидное поведение при сложных цепочках состояний

## Профиты
- Упрощение управления состоянием
- Повышение читаемости и повторного использования кода 